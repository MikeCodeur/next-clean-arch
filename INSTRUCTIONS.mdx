# Prise en main

### 💡 Prise en main de la stack de départ

## 📝 Tes notes

Detaille ce que tu as appris ici, sur une page [Notion](https://go.mikecodeur.com/course-notes-template)

## Comprendre

Dans les modules précédent nous avons vu les couches de :

- Presentation (Les RCC et RSC, Forms et composants React)
- Validation (validation de données des forms en entrée des server action)
- Persistance (appelle de la couche de persistance via ORM : drizzle)
- Authentification (via next-Auth)

Dans notre organisation de fichiers / modules on pourrait regrouper les différentes couches de la manière suivante

```bash
.
└── src/
    ├── app/
    │   ├── (auth)
    │   ├── (public)
    │   └── (dashboard)/
    │       ├── shop-admin
    │       └── ...
    ├── components/
    │   ├── ui
    │   └── features/
    │       ├── auth
    │       └── ...
    └── db/
        ├── schema
        └── script
```

- presentation : `app` et `components`
- validation (form) : `app` et `components`
- persistance : `db`
- authentification : `auth.ts`

Nous avons combiner tous les concepts des modules precedents pour faire cette premiere architecture, qui est encore loin de clean architecture.

Nous pouvons créer des comptes, se connecter, et créer des produits dans notre base de données de produits.

Pour que cela fonctionne tu vas devoir initialiser ton environnement.

## Exercice

Dans un premier temps tu vas devoir créer une base de données `Postgres` sur `Vercel` et mettre la variable d’environnement dans `.env` .`env.development`

```tsx
POSTGRES_URL="postgres://......
```

Vérifie que que le connexion se fait correctement grace à la commande

```tsx
pnpm db:check

//si c'est ok :
✅ Connexion checked in 39 ms
```

Fichiers

- `.env`
- `.env.development`

## Bonus

### 1. 🚀 Régénérer le schema de l’ORM

Nous avons deja fournis un modèle de données avec drizzle pour gagner du temps. celui ci est dans `src/db/schema`

- 🐶 génère les scripts avec `pnpm db:generate`
- 🐶 execute les scripts avec `pnpm db:migrate`
- 🐶 insère les données avec `pnpm db:seed`

En cas de problème

- 🐶 drop le schema avec les données avec `pnpm db:drop`
- 🐶 clear la database avec `pnpm db:clear`

En cas de doute, nous avons un script qui supprime tout et recréé tout

- 🐶 clear la database avec `pnpm db:reset-seed`

Fichiers

- `package.json`

### 2. 🚀 Inscription / Connexion

- **🐶** Inscris toi et connecte toi pour verifier que tout fonctionne.

Nous avons a disposition, differents users avec différents roles

Tous les mots de passe sont `Azerty123`

Fichiers

- `src/app/(auth)`

### 3. 🚀 Studio

Il est parfois nécessaire de verifier les données en base de données. Il est possible de se connecter sur Vercel, ou avec PGAdmin client. Nous avons également drizzle studio qui permet de le faire.

- **🐶 execute la commande :**

```bash
pnpm db:studio
```

Tu es maintenant prêt pour appliquer les concept de clean architecture

## Aller plus loin

## Ils vont t’aider

- **🐶 Mowgli le Chien** : _Mowgli te guidera dans chaque exercice._
- **🤖 Ash le Robot** : _Ash le Robot te donnera du code utile._
- **🚀 Julia La roquette** : _Julia te donnera des défis supplémentaires._
- **⛏️ Hulk le Marteau** : _Quand du code à supprimer est présent_
- **👨‍✈️ Hugo le chef de projet** : _Va t'aider sur les spécifications du projet_

## 🐜 Feedback

Remplir le formulaire le [formulaire de FeedBack](https://go.mikecodeur.com/cours-next-avis?entry.1912869708=Next%20Mastery&entry.1430994900=Clean%20Architecture&entry.533578441=01%20initialisation).
