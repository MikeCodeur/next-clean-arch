# Prise en main

### ğŸ’¡ Prise en main de la stack de dÃ©part

## ğŸ“ Tes notes

Detaille ce que tu as appris ici,Â surÂ uneÂ pageÂ [Notion](https://go.mikecodeur.com/course-notes-template)

## Comprendre

Dans les modules prÃ©cÃ©dent nous avons vu les couches de :

- Presentation (Les RCC et RSC, Forms et composants React)
- Validation (validation de donnÃ©es des forms en entrÃ©e des server action)
- Persistance (appelle de la couche de persistance via ORM : drizzle)
- Authentification (via next-Auth)

Dans notre organisation de fichiers / modules on pourrait regrouper les diffÃ©rentes couches de la maniÃ¨re suivante

```bash
.
â””â”€â”€ src/
    â”œâ”€â”€ app/
    â”‚   â”œâ”€â”€ (auth)
    â”‚   â”œâ”€â”€ (public)
    â”‚   â””â”€â”€ (dashboard)/
    â”‚       â”œâ”€â”€ shop-admin
    â”‚       â””â”€â”€ ...
    â”œâ”€â”€ components/
    â”‚   â”œâ”€â”€ ui
    â”‚   â””â”€â”€ features/
    â”‚       â”œâ”€â”€ auth
    â”‚       â””â”€â”€ ...
    â””â”€â”€ db/
        â”œâ”€â”€ schema
        â””â”€â”€ script
```

- presentation : `app` et `components`
- validation (form) : `app` et `components`
- persistance : `db`
- authentification : `auth.ts`

Nous avons combiner tous les concepts des modules precedents pour faire cette premiere architecture, qui est encore loin de clean architecture.

Nous pouvons crÃ©er des comptes, se connecter, et crÃ©er des produits dans notre base de donnÃ©es de produits.

Pour que cela fonctionne tu vas devoir initialiser ton environnement.

## Exercice

Dans un premier temps tu vas devoir crÃ©er une base de donnÃ©es `Postgres` sur `Vercel` et mettre la variable dâ€™environnement dans `.env` .`env.development`

```tsx
POSTGRES_URL="postgres://......
```

VÃ©rifie que que le connexion se fait correctement grace Ã  la commande

```tsx
pnpm db:check

//si c'est ok :
âœ… Connexion checked in 39 ms
```

Fichiers

- `.env`
- `.env.development`

## Bonus

### 1. ğŸš€ RÃ©gÃ©nÃ©rer le schema de lâ€™ORM

Nous avons deja fournis un modÃ¨le de donnÃ©es avec drizzle pour gagner du temps. celui ci est dans `src/db/schema`

- ğŸ¶Â gÃ©nÃ¨re les scripts avec `pnpm db:generate`
- ğŸ¶Â execute les scripts avec `pnpm db:migrate`
- ğŸ¶Â insÃ¨re les donnÃ©es avec `pnpm db:seed`

En cas de problÃ¨me

- ğŸ¶Â drop le schema avec les donnÃ©es avec `pnpm db:drop`
- ğŸ¶Â clear la database avec `pnpm db:clear`

En cas de doute, nous avons un script qui supprime tout et recrÃ©Ã© tout

- ğŸ¶Â clear la database avec `pnpm db:reset-seed`

Fichiers

- `package.json`

### 2. ğŸš€ Inscription / Connexion

- **ğŸ¶**Â Inscris toi et connecte toi pour verifier que tout fonctionne.

Nous avons a disposition, differents users avec diffÃ©rents roles

Tous les mots de passe sont `Azerty123`

Fichiers

- `src/app/(auth)`

### 3. ğŸš€ Studio

Il est parfois nÃ©cessaire de verifier les donnÃ©es en base de donnÃ©es. Il est possible de se connecter sur Vercel, ou avec PGAdmin client. Nous avons Ã©galement drizzle studio qui permet de le faire.

- **ğŸ¶Â execute la commande :**

```bash
pnpm db:studio
```

Tu es maintenant prÃªt pour appliquer les concept de clean architecture

## Aller plus loin

## Ils vont tâ€™aider

- **ğŸ¶ Mowgli le Chien** : _Mowgli te guidera dans chaque exercice._
- **ğŸ¤– Ash le Robot** : _Ash le Robot te donnera du code utile._
- **ğŸš€ Julia La roquette** : _Julia te donnera des dÃ©fis supplÃ©mentaires._
- **â›ï¸ Hulk le Marteau** : _Quand du code Ã  supprimer est prÃ©sent_
- **ğŸ‘¨â€âœˆï¸ Hugo le chef de projet** : _Va t'aider sur les spÃ©cifications du projet_

## ğŸœ Feedback

Remplir le formulaire le [formulaire de FeedBack](https://go.mikecodeur.com/cours-next-avis?entry.1912869708=Next%20Mastery&entry.1430994900=Clean%20Architecture&entry.533578441=01%20initialisation).
